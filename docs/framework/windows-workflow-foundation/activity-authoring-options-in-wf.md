---
description: '詳細情報: WF のアクティビティ作成オプション'
title: WF のアクティビティ作成オプション
ms.date: 03/30/2017
ms.assetid: b9061f5f-12c3-47f0-adbe-1330e2714c94
ms.openlocfilehash: 5f200f11f1643a9da6c8a14a40ef9c0bb1d607b6
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/06/2021
ms.locfileid: "99787982"
---
# <a name="activity-authoring-options-in-wf"></a><span data-ttu-id="61209-103">WF のアクティビティ作成オプション</span><span class="sxs-lookup"><span data-stu-id="61209-103">Activity Authoring Options in WF</span></span>

[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] <span data-ttu-id="61209-104">には、カスタム アクティビティを作成するオプションがいくつか用意されています。</span><span class="sxs-lookup"><span data-stu-id="61209-104">provides several options for creating custom activities.</span></span> <span data-ttu-id="61209-105">特定のアクティビティを作成するために使用する適切な方法は、実行時に必要な機能によって異なります。</span><span class="sxs-lookup"><span data-stu-id="61209-105">The correct method to use for authoring a given activity depends on what run-time features are required.</span></span>  
  
## <a name="deciding-which-base-activity-class-to-use-for-authoring-custom-activities"></a><span data-ttu-id="61209-106">カスタム アクティビティを作成するために使用する基本アクティビティ クラスの決定</span><span class="sxs-lookup"><span data-stu-id="61209-106">Deciding Which Base Activity Class to Use for Authoring Custom Activities</span></span>  

 <span data-ttu-id="61209-107">次の表は、カスタム アクティビティの基本クラスに使用できる機能の一覧です。</span><span class="sxs-lookup"><span data-stu-id="61209-107">The following table lists the features available in the custom activity base classes.</span></span>  
  
|<span data-ttu-id="61209-108">基本アクティビティ クラス</span><span class="sxs-lookup"><span data-stu-id="61209-108">Base activity class</span></span>|<span data-ttu-id="61209-109">使用できる機能</span><span class="sxs-lookup"><span data-stu-id="61209-109">Features available</span></span>|  
|-------------------------|------------------------|  
|<xref:System.Activities.Activity>|<span data-ttu-id="61209-110">システム標準アクティビティおよびカスタム アクティビティのグループを複合アクティビティに構成します。</span><span class="sxs-lookup"><span data-stu-id="61209-110">Composes groups of system-provided and custom activities into a composite activity.</span></span>|  
|<xref:System.Activities.CodeActivity>|<span data-ttu-id="61209-111">オーバーライドできる <xref:System.Activities.CodeActivity%601.Execute%2A> メソッドを提供することで、命令型機能を実装します。</span><span class="sxs-lookup"><span data-stu-id="61209-111">Implements imperative functionality by providing an <xref:System.Activities.CodeActivity%601.Execute%2A> method that can be overridden.</span></span> <span data-ttu-id="61209-112">また、追跡、変数、および引数へのアクセスを提供します。</span><span class="sxs-lookup"><span data-stu-id="61209-112">Also provides access to tracking, variables, and arguments..</span></span>|  
|<xref:System.Activities.NativeActivity>|<span data-ttu-id="61209-113"><xref:System.Activities.CodeActivity> のすべての機能を提供します。さらに、アクティビティの実行中止、子アクティビティの実行の取り消し、ブックマークの使用、および、アクティビティ、アクティビティのアクション、および機能のスケジュールも提供します。</span><span class="sxs-lookup"><span data-stu-id="61209-113">Provides all of the features of <xref:System.Activities.CodeActivity>, plus aborting activity execution, canceling child activity execution, using bookmarks, and scheduling activities, activity actions, and functions.</span></span>|  
|<xref:System.Activities.DynamicActivity>|<span data-ttu-id="61209-114">WF デザイナーおよび <xref:System.ComponentModel.ICustomTypeDescriptor> を介したランタイム機構と連携するアクティビティの構築に対応する、DOM のようなアプローチを提供します。これにより、新しい型を定義せずに新しいアクティビティを作成できるようになります。</span><span class="sxs-lookup"><span data-stu-id="61209-114">Provides a DOM-like approach to constructing activities that interfaces with the WF designer and the run-time machinery through <xref:System.ComponentModel.ICustomTypeDescriptor>, allowing new activities to be created without defining new types.</span></span>|  
  
## <a name="authoring-activities-using-activity"></a><span data-ttu-id="61209-115">アクティビティを使用したアクティビティの作成</span><span class="sxs-lookup"><span data-stu-id="61209-115">Authoring Activities using Activity</span></span>  

 <span data-ttu-id="61209-116"><xref:System.Activities.Activity> から派生するアクティビティは、他の既存のアクティビティをまとめることで機能を構成します。</span><span class="sxs-lookup"><span data-stu-id="61209-116">Activities that derive from <xref:System.Activities.Activity> compose functionality by assembling other existing activities.</span></span> <span data-ttu-id="61209-117">これらのアクティビティには、既存のカスタム アクティビティと、[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] アクティビティ ライブラリのアクティビティを使用できます。</span><span class="sxs-lookup"><span data-stu-id="61209-117">These activities can be existing custom activities and activities from the [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] activity library.</span></span> <span data-ttu-id="61209-118">これらのアクティビティをまとめることは、カスタム機能を作成するための最も基本的な方法です。</span><span class="sxs-lookup"><span data-stu-id="61209-118">Assembling these activities is the most basic way to create custom functionality.</span></span> <span data-ttu-id="61209-119">このアプローチは、ワークフローを作成するうえでビジュアル デザイン環境を使用するときによく採用されます。</span><span class="sxs-lookup"><span data-stu-id="61209-119">This approach is most typically taken when using a visual design environment for authoring workflows.</span></span>  
  
## <a name="authoring-activities-using-codeactivity-or-asynccodeactivity"></a><span data-ttu-id="61209-120">CodeActivity または AsyncCodeActivity を使用したアクティビティの作成</span><span class="sxs-lookup"><span data-stu-id="61209-120">Authoring Activities using CodeActivity or AsyncCodeActivity</span></span>  

 <span data-ttu-id="61209-121"><xref:System.Activities.CodeActivity> または <xref:System.Activities.AsyncCodeActivity> から派生するアクティビティは、<xref:System.Activities.CodeActivity%601.Execute%2A> メソッドをカスタムの命令型コードでオーバーライドすることで、命令型機能を実装できます。</span><span class="sxs-lookup"><span data-stu-id="61209-121">Activities that derive from <xref:System.Activities.CodeActivity> or <xref:System.Activities.AsyncCodeActivity> can implement imperative functionality by overriding the <xref:System.Activities.CodeActivity%601.Execute%2A> method with custom imperative code.</span></span> <span data-ttu-id="61209-122">カスタム コードが実行されるのは、アクティビティが実行時に実行されるときです。</span><span class="sxs-lookup"><span data-stu-id="61209-122">The custom code is executed when the activity is executed by the runtime.</span></span> <span data-ttu-id="61209-123">この方法で作成されたアクティビティはカスタム機能にアクセスできますが、実行時環境へのフル アクセス、子アクティビティのスケジュール機能、ブックマークの作成、Cancel メソッドや Abort メソッドのサポートなどの、ランタイムのすべての機能にアクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="61209-123">While activities created in this way have access to custom functionality, they do not have access to all of the features of the runtime, such as full access to the execution environment, the ability to schedule child activities, bookmark creation, or support for a Cancel or Abort method.</span></span> <span data-ttu-id="61209-124"><xref:System.Activities.CodeActivity> を実行すると、(<xref:System.Activities.CodeActivityContext> クラスまたは <xref:System.Activities.AsyncCodeActivityContext> クラスを介して) 限定されたバージョンの実行時環境にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="61209-124">When a <xref:System.Activities.CodeActivity> executes, it has access to a reduced version of the execution environment (through the <xref:System.Activities.CodeActivityContext> or <xref:System.Activities.AsyncCodeActivityContext> class).</span></span> <span data-ttu-id="61209-125"><xref:System.Activities.CodeActivity> を使用して作成したアクティビティは、引数と変数の解決、拡張、および追跡にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="61209-125">Activities created using <xref:System.Activities.CodeActivity> have access to argument and variable resolution, extensions, and tracking.</span></span> <span data-ttu-id="61209-126">非同期アクティビティのスケジュールは、<xref:System.Activities.AsyncCodeActivity> を使用して実行できます。</span><span class="sxs-lookup"><span data-stu-id="61209-126">Asynchronous activity scheduling can be done using <xref:System.Activities.AsyncCodeActivity>.</span></span>  
  
## <a name="authoring-activities-using-nativeactivity"></a><span data-ttu-id="61209-127">NativeActivity を使用したアクティビティの作成</span><span class="sxs-lookup"><span data-stu-id="61209-127">Authoring Activities using NativeActivity</span></span>  

 <span data-ttu-id="61209-128"><xref:System.Activities.NativeActivity> から派生するアクティビティは、<xref:System.Activities.CodeActivity> から派生するアクティビティと同様に、<xref:System.Activities.NativeActivity.Execute%2A> をオーバーライドすることで、命令型機能を作成します。ただし、<xref:System.Activities.NativeActivityContext> メソッドに渡される <xref:System.Activities.NativeActivity.Execute%2A> を介して、ワークフロー ランタイムのすべての機能にもアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="61209-128">Activities that derive from <xref:System.Activities.NativeActivity>, like those that derive from <xref:System.Activities.CodeActivity>, create imperative functionality by overriding <xref:System.Activities.NativeActivity.Execute%2A>, but also have access to all of the functionality of the workflow runtime through the <xref:System.Activities.NativeActivityContext> that gets passed into the <xref:System.Activities.NativeActivity.Execute%2A> method.</span></span> <span data-ttu-id="61209-129">このコンテキストは、子アクティビティのスケジュールと取り消し、<xref:System.Activities.ActivityAction> および <xref:System.Activities.ActivityFunc%601> オブジェクトの実行、ワークフローへのトランザクションの流し込み、非同期プロセスの呼び出し、実行の取り消しと中止、実行プロパティおよび実行拡張機能へのアクセス、およびブックマーク (一時停止したワークフローの再開を処理) をサポートします。</span><span class="sxs-lookup"><span data-stu-id="61209-129">This context has support for scheduling and canceling child activities, executing <xref:System.Activities.ActivityAction> and <xref:System.Activities.ActivityFunc%601> objects, flowing transactions into a workflow, invoking asynchronous processes, canceling and aborting execution, access to execution properties and extensions, and bookmarks (handles for resuming paused workflows).</span></span>  
  
## <a name="authoring-activities-using-dynamicactivity"></a><span data-ttu-id="61209-130">DynamicActivity を使用したアクティビティの作成</span><span class="sxs-lookup"><span data-stu-id="61209-130">Authoring Activities using DynamicActivity</span></span>  

 <span data-ttu-id="61209-131">他の 3 種類のアクティビティとは異なり、<xref:System.Activities.DynamicActivity> から新しい型を派生することでは新しい機能は作成されません (クラスはシールされています)。その代わり、アクティビティのドキュメント オブジェクト モデル (DOM) を使用して、<xref:System.Activities.DynamicActivity.Properties%2A> プロパティと <xref:System.Activities.DynamicActivity.Implementation%2A> プロパティに機能をまとめることで、新しい機能を作成します。</span><span class="sxs-lookup"><span data-stu-id="61209-131">Unlike the other three types of activity, new functionality is not created by deriving new types from <xref:System.Activities.DynamicActivity> (the class is sealed), but instead, by assembling functionality into the <xref:System.Activities.DynamicActivity.Properties%2A> and <xref:System.Activities.DynamicActivity.Implementation%2A> properties using an activity document object model (DOM).</span></span>  
  
## <a name="authoring-activities-that-return-a-result"></a><span data-ttu-id="61209-132">結果を返すアクティビティの作成</span><span class="sxs-lookup"><span data-stu-id="61209-132">Authoring Activities that Return a Result</span></span>  

 <span data-ttu-id="61209-133">多くのアクティビティは、実行後に結果を返します。</span><span class="sxs-lookup"><span data-stu-id="61209-133">Many activities must return a result after their execution.</span></span> <span data-ttu-id="61209-134">この目的でアクティビティにカスタムの <xref:System.Activities.OutArgument%601> を定義することは常に可能ですが、代わりに <xref:System.Activities.Activity%601> を使用するか、<xref:System.Activities.CodeActivity%601> または <xref:System.Activities.NativeActivity%601> から派生することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="61209-134">Although it is possible to always define a custom <xref:System.Activities.OutArgument%601> on an activity for this purpose, it is suggested to instead use <xref:System.Activities.Activity%601>, or derive from <xref:System.Activities.CodeActivity%601> or <xref:System.Activities.NativeActivity%601>.</span></span> <span data-ttu-id="61209-135">これらの各基本クラスには、アクティビティの戻り値に使用できる Result という <xref:System.Activities.OutArgument%601> があります。</span><span class="sxs-lookup"><span data-stu-id="61209-135">Each of these base classes has an <xref:System.Activities.OutArgument%601> named Result that your activity can use for its return value.</span></span> <span data-ttu-id="61209-136">結果を返すアクティビティは、1 つの結果のみをアクティビティから返す必要がある場合にのみ使用します。複数の結果を返す必要がある場合は、別の <xref:System.Activities.OutArgument%601> メンバーを代わりに使用します。</span><span class="sxs-lookup"><span data-stu-id="61209-136">Activities that return a result should only be used if only one result needs to be returned from an activity; if multiple results need to be returned, separate <xref:System.Activities.OutArgument%601> members should be used instead.</span></span>
