---
description: '詳細情報: データ サービスのバージョン管理 (WCF Data Services)'
title: データ サービスのバージョン管理 (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- versioning, WCF Data Services
- versioning [WCF Data Services]
- WCF Data Services, versioning
ms.assetid: e3e899cc-7f25-4f67-958f-063f01f79766
ms.openlocfilehash: 5b08d9d822fc9dd8be4cd4614f8a5536bf98fd43
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/06/2021
ms.locfileid: "99766141"
---
# <a name="data-service-versioning-wcf-data-services"></a><span data-ttu-id="28ebd-103">データ サービスのバージョン管理 (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="28ebd-103">Data Service Versioning (WCF Data Services)</span></span>

[!INCLUDE [wcf-deprecated](~/includes/wcf-deprecated.md)]

<span data-ttu-id="28ebd-104">Open Data Protocol (OData) では、データ サービスを作成できます。これにより、クライアントは、データ モデルに基づく URI を使用してリソースとしてのデータにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-104">The Open Data Protocol (OData) enables you to create data services so that clients can access data as resources using URIs that are based on a data model.</span></span> <span data-ttu-id="28ebd-105">OData では、サービス操作の定義もサポートされます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-105">OData also supports the definition of service operations.</span></span> <span data-ttu-id="28ebd-106">ビジネス ニーズの変化、情報テクノロジの要件、その他の問題への対処などのさまざまな理由により、サービスの初期導入後と、場合によっては有効期間中に数回、これらのデータ サービスを変更することが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-106">After initial deployment, and potentially several times during their lifetime, these data services may need to be changed for a variety of reasons, such as changing business needs, information technology requirements, or to address other issues.</span></span> <span data-ttu-id="28ebd-107">既存のデータ サービスに変更を加える場合は、新しいバージョンのデータ サービスを定義する必要性や、既存のクライアント アプリケーションへの影響を最小限に抑える最善の方法を検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-107">When you make changes to an existing data service, you must consider whether to define a new version of your data service and how best to minimize the impact on existing client applications.</span></span> <span data-ttu-id="28ebd-108">ここでは、新しいバージョンのデータ サービスをいつどのように作成するかに関するガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-108">This topic provides guidance on when and how to create a new version of a data service.</span></span> <span data-ttu-id="28ebd-109">さらに、WCF Data Services によって OData プロトコルの異なるバージョンをサポートするクライアントとデータ サービスの間の交換をどのように処理するかについても説明します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-109">It also describes how WCF Data Services handles an exchange between clients and data services that support different versions of the OData protocol.</span></span>

## <a name="versioning-a-wcf-data-service"></a><span data-ttu-id="28ebd-110">WCF Data Service のバージョン管理</span><span class="sxs-lookup"><span data-stu-id="28ebd-110">Versioning a WCF Data Service</span></span>

 <span data-ttu-id="28ebd-111">データ サービスが配置され、データが使用されている状況では、データ サービスに変更を加えることで、既存のクライアント アプリケーションとの間に互換性の問題が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-111">Once a data service is deployed and the data is being consumed, changes to the data service have the potential to cause compatibility issues with existing client applications.</span></span> <span data-ttu-id="28ebd-112">ただし、サービスの全体的なビジネス ニーズを受けて変更が求められることも多いため、クライアント アプリケーションへの影響を最小限に抑えながらデータ サービスの新しいバージョンをいつどのように作成するかを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-112">However, because changes are often required by the overall business needs of the service, you must consider when and how to create a new version of your data service with the least impact on client applications.</span></span>

### <a name="data-model-changes-that-recommend-a-new-data-service-version"></a><span data-ttu-id="28ebd-113">新しいバージョンのデータ サービスが推奨されるデータ モデルの変更</span><span class="sxs-lookup"><span data-stu-id="28ebd-113">Data Model Changes that Recommend a New Data Service Version</span></span>

 <span data-ttu-id="28ebd-114">データ サービスの新しいバージョンを発行するかどうかを検討する際は、さまざまな種類の変更がクライアント アプリケーションに与える影響を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="28ebd-114">When considering whether to publish a new version of a data service, it is important to understand how the different kinds of changes may affect client applications.</span></span> <span data-ttu-id="28ebd-115">データ サービスの新しいバージョンを作成する必要があるデータ サービスへの変更は、次の 2 つのカテゴリに分類できます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-115">Changes to a data service that might require you to create a new version of a data service can be divided into the following two categories:</span></span>

- <span data-ttu-id="28ebd-116">サービス コントラクトに対する変更。これには、サービス操作の更新、エンティティ セット (フィード) のアクセシビリティへの変更、バージョンの変更、およびサービスの動作に対するその他の変更が含まれます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-116">Changes to the service contract—which include updates to service operations, changes to the accessibility of entity sets (feeds), version changes, and other changes to service behaviors.</span></span>

- <span data-ttu-id="28ebd-117">データ コントラクトに対する変更。これには、データ モデル、フィード形式、またはフィードのカスタマイズが含まれます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-117">Changes to the data contract—which include changes to the data model, feed formats, or feed customizations.</span></span>

 <span data-ttu-id="28ebd-118">次の表に、データ サービスの新しいバージョンの発行を考慮する必要がある変更の種類を示します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-118">The following table details for which kinds of changes you should consider publishing a new version of the data service:</span></span>

|<span data-ttu-id="28ebd-119">変更の種類</span><span class="sxs-lookup"><span data-stu-id="28ebd-119">Type of Change</span></span>|<span data-ttu-id="28ebd-120">新しいバージョンが必要</span><span class="sxs-lookup"><span data-stu-id="28ebd-120">Requires a new version</span></span>|<span data-ttu-id="28ebd-121">新しいバージョンは不要</span><span class="sxs-lookup"><span data-stu-id="28ebd-121">New version not needed</span></span>|
|--------------------|----------------------------|----------------------------|
|<span data-ttu-id="28ebd-122">サービス操作</span><span class="sxs-lookup"><span data-stu-id="28ebd-122">Service operations</span></span>|<span data-ttu-id="28ebd-123">-   新しいパラメーターを追加する</span><span class="sxs-lookup"><span data-stu-id="28ebd-123">-   Add new parameter</span></span><br /><span data-ttu-id="28ebd-124">-   戻り値の型を変更する</span><span class="sxs-lookup"><span data-stu-id="28ebd-124">-   Change return type</span></span><br /><span data-ttu-id="28ebd-125">-   サービス操作を削除する</span><span class="sxs-lookup"><span data-stu-id="28ebd-125">-   Remove service operation</span></span>|<span data-ttu-id="28ebd-126">-   既存のパラメーターを削除する</span><span class="sxs-lookup"><span data-stu-id="28ebd-126">-   Delete existing parameter</span></span><br /><span data-ttu-id="28ebd-127">-   新しいサービス操作を追加する</span><span class="sxs-lookup"><span data-stu-id="28ebd-127">-   Add new service operation</span></span>|
|<span data-ttu-id="28ebd-128">サービスの動作</span><span class="sxs-lookup"><span data-stu-id="28ebd-128">Service behaviors</span></span>|<span data-ttu-id="28ebd-129">-   カウント要求を無効にする</span><span class="sxs-lookup"><span data-stu-id="28ebd-129">-   Disable count requests</span></span><br /><span data-ttu-id="28ebd-130">-   投影のサポートを無効にする</span><span class="sxs-lookup"><span data-stu-id="28ebd-130">-   Disable projection support</span></span><br /><span data-ttu-id="28ebd-131">-   必要なデータ サービスのバージョンを引き上げる</span><span class="sxs-lookup"><span data-stu-id="28ebd-131">-   Increase the required data service version</span></span>|<span data-ttu-id="28ebd-132">-   カウント要求を有効にする</span><span class="sxs-lookup"><span data-stu-id="28ebd-132">-   Enable count requests</span></span><br /><span data-ttu-id="28ebd-133">-   投影のサポートを有効にする</span><span class="sxs-lookup"><span data-stu-id="28ebd-133">-   Enable projection support</span></span><br /><span data-ttu-id="28ebd-134">-   必要なデータ サービスのバージョンを引き下げる</span><span class="sxs-lookup"><span data-stu-id="28ebd-134">-   Decrease the required data service version</span></span>|
|<span data-ttu-id="28ebd-135">エンティティ セットのアクセス許可</span><span class="sxs-lookup"><span data-stu-id="28ebd-135">Entity set permissions</span></span>|<span data-ttu-id="28ebd-136">-   エンティティ セットのアクセス許可を制限する</span><span class="sxs-lookup"><span data-stu-id="28ebd-136">-   Restrict entity set permissions</span></span><br /><span data-ttu-id="28ebd-137">-   応答コードを変更する (新しい最初の桁の値) <sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="28ebd-137">-   Change response code (new first digit value) <sup>1</sup></span></span>|<span data-ttu-id="28ebd-138">-   エンティティ セットのアクセス許可の制限を解除する</span><span class="sxs-lookup"><span data-stu-id="28ebd-138">-   Relax entity set permissions</span></span><br /><span data-ttu-id="28ebd-139">-   応答コードを変更する (同じ最初の桁の値)</span><span class="sxs-lookup"><span data-stu-id="28ebd-139">-   Change response code (same first digit value)</span></span>|
|<span data-ttu-id="28ebd-140">エンティティのプロパティ</span><span class="sxs-lookup"><span data-stu-id="28ebd-140">Entity properties</span></span>|<span data-ttu-id="28ebd-141">-   既存のプロパティまたはリレーションシップを削除する</span><span class="sxs-lookup"><span data-stu-id="28ebd-141">-   Remove existing property or relationship</span></span><br /><span data-ttu-id="28ebd-142">-   null 非許容のプロパティを追加する</span><span class="sxs-lookup"><span data-stu-id="28ebd-142">-   Add non-nullable property</span></span><br /><span data-ttu-id="28ebd-143">-   既存のプロパティを変更する</span><span class="sxs-lookup"><span data-stu-id="28ebd-143">-   Change existing property</span></span>|<span data-ttu-id="28ebd-144">-   null 許容のプロパティを追加する<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="28ebd-144">-   Add nullable property<sup>2</sup></span></span>|
|<span data-ttu-id="28ebd-145">エンティティ セット</span><span class="sxs-lookup"><span data-stu-id="28ebd-145">Entity sets</span></span>|<span data-ttu-id="28ebd-146">-   エンティティ セットを削除する</span><span class="sxs-lookup"><span data-stu-id="28ebd-146">-   Remove entity set</span></span>|<span data-ttu-id="28ebd-147">-   派生型を追加する</span><span class="sxs-lookup"><span data-stu-id="28ebd-147">-   Add derived type</span></span><br /><span data-ttu-id="28ebd-148">-   基本データ型を変更する</span><span class="sxs-lookup"><span data-stu-id="28ebd-148">-   Change base type</span></span><br /><span data-ttu-id="28ebd-149">-   エンティティ セットを追加する</span><span class="sxs-lookup"><span data-stu-id="28ebd-149">-   Add entity set</span></span>|
|<span data-ttu-id="28ebd-150">フィードのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="28ebd-150">Feed customization</span></span>|<span data-ttu-id="28ebd-151">-   エンティティ プロパティのマッピングを変更する</span><span class="sxs-lookup"><span data-stu-id="28ebd-151">-   Change entity-property mapping</span></span>||

 <span data-ttu-id="28ebd-152"><sup>1</sup> 特定のエラー コードを受信することにクライアント アプリケーションがどの程度厳密に依存しているかによって異なります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-152"><sup>1</sup> This may depend on how strictly a client application relies on receiving a specific error code.</span></span>

 <span data-ttu-id="28ebd-153"><sup>2</sup> <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> プロパティを `true` に設定すると、クライアントでは、データ サービスによって送信された、クライアント上で定義されていない新しいプロパティが無視されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-153"><sup>2</sup> You can set the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property to `true` to have the client ignore any new properties sent by the data service that are not defined on the client.</span></span> <span data-ttu-id="28ebd-154">ただし、挿入の場合、クライアントによって POST 要求に含められていないプロパティは既定値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-154">However, when inserts are made, the properties not included by the client in the POST request are set to their default values.</span></span> <span data-ttu-id="28ebd-155">更新の場合、クライアントが識別できないプロパティ内の既存のデータは、既定値で上書きされます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-155">For updates, any existing data in a property unknown to the client might be overwritten with default values.</span></span> <span data-ttu-id="28ebd-156">この場合は、更新を MERGE 要求として送信する必要があります (これは既定の動作です)。</span><span class="sxs-lookup"><span data-stu-id="28ebd-156">In this case, you should send the update as a MERGE request, which is the default.</span></span> <span data-ttu-id="28ebd-157">詳細については、「[データ サービス コンテキストの管理](managing-the-data-service-context-wcf-data-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="28ebd-157">For more information, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span>

### <a name="how-to-version-a-data-service"></a><span data-ttu-id="28ebd-158">データ サービスのバージョンの管理</span><span class="sxs-lookup"><span data-stu-id="28ebd-158">How to Version a Data Service</span></span>

 <span data-ttu-id="28ebd-159">必要に応じて、サービス コントラクトまたはデータ モデルが更新されたサービスの新しいインスタンスを作成して、データ サービスの新しいバージョンを定義します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-159">When required, a new data service version is defined by creating a new instance of the service with an updated service contract or data model.</span></span> <span data-ttu-id="28ebd-160">次に、この新しいサービスを、以前のバージョンと区別する新しい URI エンドポイントを使用して公開します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-160">This new service is then exposed by using a new URI endpoint, which differentiates it from the previous version.</span></span> <span data-ttu-id="28ebd-161">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-161">For example:</span></span>

- <span data-ttu-id="28ebd-162">古いバージョン: `http://services.odata.org/Northwind/v1/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="28ebd-162">Old version: `http://services.odata.org/Northwind/v1/Northwind.svc/`</span></span>

- <span data-ttu-id="28ebd-163">新しいバージョン: `http://services.odata.org/Northwind/v2/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="28ebd-163">New version: `http://services.odata.org/Northwind/v2/Northwind.svc/`</span></span>

 <span data-ttu-id="28ebd-164">データ サービスをアップグレードした場合、新しいルート URI を使用するには、新しいデータ サービス メタデータに基づいてクライアントも更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-164">When upgrading a data service, clients will need to also be updated based on the new data service metadata and to use the new root URI.</span></span> <span data-ttu-id="28ebd-165">可能な場合は、新しいバージョンを使用するためのアップグレードが行われていないクライアントをサポートするために、データ サービスの以前のバージョンを保持してください。</span><span class="sxs-lookup"><span data-stu-id="28ebd-165">When possible, you should maintain the previous version of the data service to support clients that have not yet been upgraded to use the new version.</span></span> <span data-ttu-id="28ebd-166">データ サービスの古いバージョンは、必要でなくなった時点で削除できます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-166">Older versions of a data service can be removed when they are no longer needed.</span></span> <span data-ttu-id="28ebd-167">データ サービスのエンドポイント URI を外部の構成ファイルに保持することを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-167">You should consider maintaining the data service endpoint URI in an external configuration file.</span></span>

## <a name="odata-protocol-versions"></a><span data-ttu-id="28ebd-168">OData プロトコルのバージョン</span><span class="sxs-lookup"><span data-stu-id="28ebd-168">OData Protocol Versions</span></span>

 <span data-ttu-id="28ebd-169">OData の新しいバージョンがリリースされると、データ サービスでサポートされている OData プロトコルの同バージョンがクライアント アプリケーションで使用されていない可能性がでてきます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-169">As new versions of OData are released, client applications may not be using the same version of the OData protocol that is supported by the data service.</span></span> <span data-ttu-id="28ebd-170">OData の新しいバージョンをサポートするデータ サービスにアクセスできる古いクライアント アプリケーションもあります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-170">An older client application may access a data service that supports a newer version of OData.</span></span> <span data-ttu-id="28ebd-171">また、アクセス先のデータ サービスよりも新しいバージョンの OData をサポートする、新しいバージョンの WCF Data Services クライアント ライブラリを使用しているクライアント アプリケーションもあります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-171">A client application may also be using a newer version of the WCF Data Services client library, which supports a newer version of OData than does the data service that is being accessed.</span></span>

 <span data-ttu-id="28ebd-172">WCF Data Services では、これらのバージョン管理シナリオを処理するために OData で提供されるサポートを利用しています。</span><span class="sxs-lookup"><span data-stu-id="28ebd-172">WCF Data Services leverages the support provided by OData to handle such versioning scenarios.</span></span> <span data-ttu-id="28ebd-173">さらに、データ サービスで使用される OData のバージョンとは異なるバージョンがクライアントで指定されている場合に、データ モデル メタデータを生成および使用してクライアント データ サービス クラスを作成するためのサポートも備えられています。</span><span class="sxs-lookup"><span data-stu-id="28ebd-173">There is also support for generating and using data model metadata to create client data service classes when the client uses a different version of OData than the data service uses.</span></span> <span data-ttu-id="28ebd-174">詳細については、[OData: 概要](https://www.odata.org/documentation/odata-version-2-0/overview/)に関する記事のプロトコルのバージョン管理のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="28ebd-174">For more information, see the Protocol Versioning section in the [OData: Overview](https://www.odata.org/documentation/odata-version-2-0/overview/) article.</span></span>

### <a name="version-negotiation"></a><span data-ttu-id="28ebd-175">バージョンのネゴシエーション</span><span class="sxs-lookup"><span data-stu-id="28ebd-175">Version Negotiation</span></span>

 <span data-ttu-id="28ebd-176">クライアントによって要求されるバージョンにかかわらず、サービスによって使用される OData プロトコルの最高バージョンを定義するようにデータ サービスを構成できます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-176">The data service can be configured to define the highest version of the OData protocol that will be used by the service, regardless of the version requested by the client.</span></span> <span data-ttu-id="28ebd-177">そのためには、データ サービスで使用される <xref:System.Data.Services.DataServiceBehavior> の <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> プロパティに <xref:System.Data.Services.Common.DataServiceProtocolVersion> の値を指定します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-177">You can do this by specifying a <xref:System.Data.Services.Common.DataServiceProtocolVersion> value for the <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> property of the <xref:System.Data.Services.DataServiceBehavior> used by the data service.</span></span> <span data-ttu-id="28ebd-178">詳細については、「[データ サービスの構成](configuring-the-data-service-wcf-data-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="28ebd-178">For more information, see [Configuring the Data Service](configuring-the-data-service-wcf-data-services.md).</span></span>

 <span data-ttu-id="28ebd-179">アプリケーションで WCF Data Services クライアント ライブラリを使用してデータ サービスにアクセスする場合、アプリケーション内で使用している OData のバージョンと機能により、ライブラリではこれらのヘッダーに正しい値が自動的に指定されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-179">When an application uses the WCF Data Services client libraries to access a data service, the libraries automatically set these headers to the correct values, depending on the version of OData and the features that are used in your application.</span></span> <span data-ttu-id="28ebd-180">既定では、WCF Data Services では要求された操作をサポートする最も低いプロトコル バーションが使用されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-180">By default, WCF Data Services uses the lowest protocol version that supports the requested operation.</span></span>

 <span data-ttu-id="28ebd-181">次の表に、OData プロトコルの特定のバージョンに対する WCF Data Services のサポートが用意されている .NET Framework および Silverlight のバージョンの詳細を示します。</span><span class="sxs-lookup"><span data-stu-id="28ebd-181">The following table details the versions of .NET Framework and Silverlight that include WCF Data Services support for specific versions of the OData protocol.</span></span>

|<span data-ttu-id="28ebd-182">OData プロトコルのバージョン</span><span class="sxs-lookup"><span data-stu-id="28ebd-182">OData Protocol Version</span></span>|<span data-ttu-id="28ebd-183">サポートが用意されているバージョン</span><span class="sxs-lookup"><span data-stu-id="28ebd-183">Support introduced in…</span></span>|
|-----------------------------------------------------------------------------------|----------------------------|
|<span data-ttu-id="28ebd-184">バージョン 1</span><span class="sxs-lookup"><span data-stu-id="28ebd-184">Version 1</span></span>|<span data-ttu-id="28ebd-185">- .NET Framework 3.5 Service Pack 1 (SP1)</span><span class="sxs-lookup"><span data-stu-id="28ebd-185">- .NET Framework 3.5 Service Pack 1 (SP1)</span></span><br /><span data-ttu-id="28ebd-186">- Silverlight バージョン 3</span><span class="sxs-lookup"><span data-stu-id="28ebd-186">- Silverlight version 3</span></span>|
|<span data-ttu-id="28ebd-187">バージョン 2</span><span class="sxs-lookup"><span data-stu-id="28ebd-187">Version 2</span></span>|<span data-ttu-id="28ebd-188">- .NET Framework 4</span><span class="sxs-lookup"><span data-stu-id="28ebd-188">- .NET Framework 4</span></span><br /><span data-ttu-id="28ebd-189">- Silverlight バージョン 4</span><span class="sxs-lookup"><span data-stu-id="28ebd-189">- Silverlight version 4</span></span>|

### <a name="metadata-versions"></a><span data-ttu-id="28ebd-190">メタデータのバージョン</span><span class="sxs-lookup"><span data-stu-id="28ebd-190">Metadata Versions</span></span>

 <span data-ttu-id="28ebd-191">既定では、WCF Data Services ではデータ モデルを表すために CSDL のバージョン 1.1 が使用されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-191">By default, WCF Data Services uses version 1.1 of CSDL to represent a data model.</span></span> <span data-ttu-id="28ebd-192">リフレクション プロバイダーまたはカスタム データ サービス プロバイダーに基づくデータ モデルの場合は、常にこの CSDL バージョンが使用されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-192">This is always the case for data models that are based on either a reflection provider or a custom data service provider.</span></span> <span data-ttu-id="28ebd-193">ただし、Entity Framework を使用してデータ モデルを定義している場合は、返される CSDL のバージョンは Entity Framework で使用されるバージョンと同じになります。</span><span class="sxs-lookup"><span data-stu-id="28ebd-193">However, when the data model is defined by using the Entity Framework, the version of CSDL returned is the same as the version that is used by the Entity Framework.</span></span> <span data-ttu-id="28ebd-194">CSDL のバージョンは、[スキーマ要素 (CSDL)](/ef/ef6/modeling/designer/advanced/edmx/csdl-spec#schema-element-csdl) の名前空間によって決定されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-194">The version of the CSDL is determined by the namespace of the [Schema element (CSDL)](/ef/ef6/modeling/designer/advanced/edmx/csdl-spec#schema-element-csdl).</span></span>

 <span data-ttu-id="28ebd-195">返されたメタデータの `DataServices` 要素には `DataServiceVersion` 属性も含まれます。この属性は、応答メッセージの `DataServiceVersion` ヘッダーの値と同じです。</span><span class="sxs-lookup"><span data-stu-id="28ebd-195">The `DataServices` element of the returned metadata also contains a `DataServiceVersion` attribute, which is the same value as the `DataServiceVersion` header in the response message.</span></span> <span data-ttu-id="28ebd-196">Visual Studio の **[サービス参照の追加]** ダイアログ ボックスなどのクライアント アプリケーションでは、この情報を使用して、データ サービスをホストする WCF Data Services のバージョンと正しく連動するクライアント データ サービス クラスが生成されます。</span><span class="sxs-lookup"><span data-stu-id="28ebd-196">Client applications, such as the **Add Service Reference** dialog box in Visual Studio, use this information to generate client data service classes that work correctly with the version of WCF Data Services that host the data service.</span></span> <span data-ttu-id="28ebd-197">詳細については、[OData: 概要](https://www.odata.org/documentation/odata-version-2-0/overview/)に関する記事のプロトコルのバージョン管理のセクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="28ebd-197">For more information, see the Protocol Versioning section in the [OData: Overview](https://www.odata.org/documentation/odata-version-2-0/overview/) article.</span></span>

## <a name="see-also"></a><span data-ttu-id="28ebd-198">関連項目</span><span class="sxs-lookup"><span data-stu-id="28ebd-198">See also</span></span>

- [<span data-ttu-id="28ebd-199">Data Services プロバイダー</span><span class="sxs-lookup"><span data-stu-id="28ebd-199">Data Services Providers</span></span>](data-services-providers-wcf-data-services.md)
- [<span data-ttu-id="28ebd-200">WCF Data Services の定義</span><span class="sxs-lookup"><span data-stu-id="28ebd-200">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
