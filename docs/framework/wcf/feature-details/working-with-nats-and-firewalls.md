---
description: 詳細については、「Nat とファイアウォールの使用」を参照してください。
title: NAT とファイアウォールの使用
ms.date: 03/30/2017
helpviewer_keywords:
- firewalls [WCF]
- NATs [WCF]
ms.assetid: 74db0632-1bf0-428b-89c8-bd53b64332e7
ms.openlocfilehash: 6d5adb25ebe77e237a3456d450e8f59c65043bfc
ms.sourcegitcommit: ddf7edb67715a5b9a45e3dd44536dabc153c1de0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/06/2021
ms.locfileid: "99704265"
---
# <a name="working-with-nats-and-firewalls"></a><span data-ttu-id="10afb-103">NAT とファイアウォールの使用</span><span class="sxs-lookup"><span data-stu-id="10afb-103">Working with NATs and Firewalls</span></span>

<span data-ttu-id="10afb-104">ネットワーク接続のクライアントとサーバーには、直接開いている通信用のパスが存在しないことがよくあります。</span><span class="sxs-lookup"><span data-stu-id="10afb-104">The client and server of a network connection frequently do not have a direct and open path for communication.</span></span> <span data-ttu-id="10afb-105">パケットは、エンドポイント コンピューター上だけでなく、ネットワーク上の中間コンピューターによってもフィルター処理、ルーティング、分析、および変換されます。</span><span class="sxs-lookup"><span data-stu-id="10afb-105">Packets are filtered, routed, analyzed, and transformed both on the endpoint machines and by intermediate machines on the network.</span></span> <span data-ttu-id="10afb-106">ネットワーク アドレス変換 (NAT: Network Address Translation) とファイアウォールは、ネットワーク通信に参加できる中間アプリケーションの一般的な例です。</span><span class="sxs-lookup"><span data-stu-id="10afb-106">Network address translations (NATs) and firewalls are common examples of intermediate applications that can participate in network communication.</span></span>  
  
 <span data-ttu-id="10afb-107">Windows Communication Foundation (WCF) トランスポートとメッセージ交換パターン (MEPs) は、Nat とファイアウォールの存在に対して異なる反応をします。</span><span class="sxs-lookup"><span data-stu-id="10afb-107">Windows Communication Foundation (WCF) transports, and message exchange patterns (MEPs) react differently to, the presence of NATs and firewalls.</span></span> <span data-ttu-id="10afb-108">ここでは、一般的なネットワーク トポロジで NAT とファイアウォールがどのように機能するかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="10afb-108">This topic describes how NATs and firewalls function in common network topologies.</span></span> <span data-ttu-id="10afb-109">ネットワーク上の Nat とファイアウォールに対するアプリケーションの堅牢性を高めるために、WCF トランスポートと MEPs の特定の組み合わせに関する推奨事項が提供されています。</span><span class="sxs-lookup"><span data-stu-id="10afb-109">Recommendations for specific combinations of WCF transports and MEPs are given that help make your applications more robust to NATs and firewalls on the network.</span></span>  
  
## <a name="how-nats-affect-communication"></a><span data-ttu-id="10afb-110">NAT が通信に及ぼす影響</span><span class="sxs-lookup"><span data-stu-id="10afb-110">How NATs Affect Communication</span></span>  

 <span data-ttu-id="10afb-111">NAT は、複数のコンピューターで 1 つの外部 IP アドレスを共有できるようにするために作成されました。</span><span class="sxs-lookup"><span data-stu-id="10afb-111">NAT was created to enable several machines to share a single external IP address.</span></span> <span data-ttu-id="10afb-112">ポート再割り当て NAT は、新しいポート番号を使用して、接続する内部 IP アドレスとポートを外部 IP アドレスに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="10afb-112">A port-remapping NAT maps an internal IP address and port for a connection to an external IP address with a new port number.</span></span> <span data-ttu-id="10afb-113">新しいポート番号により、NAT は、リターン トラフィックを元の通信に関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="10afb-113">The new port number allows the NAT to correlate return traffic with the original communication.</span></span> <span data-ttu-id="10afb-114">現在、多くのホーム ユーザーがプライベートでのみルーティング可能な IP アドレスを持ち、パケットのグローバル ルーティングを実現するために NAT に依存しています。</span><span class="sxs-lookup"><span data-stu-id="10afb-114">Many home users now have an IP address that is only privately routable and rely on a NAT to provide global routing of packets.</span></span>  
  
 <span data-ttu-id="10afb-115">NAT は、セキュリティの境界を提供しません。</span><span class="sxs-lookup"><span data-stu-id="10afb-115">A NAT does not provide a security boundary.</span></span> <span data-ttu-id="10afb-116">ただし、一般的な NAT 構成は、内部コンピューターが直接アドレス指定されないようにします。</span><span class="sxs-lookup"><span data-stu-id="10afb-116">However, common NAT configurations prevent the internal machines from being directly addressed.</span></span> <span data-ttu-id="10afb-117">これにより、内部コンピューターが望ましくない接続から保護されると共に、データをクライアントに非同期的に送り返す必要があるサーバー アプリケーションの作成が困難になります。</span><span class="sxs-lookup"><span data-stu-id="10afb-117">This both protects the internal machines from some unwanted connections and makes it difficult to write server applications that must asynchronously send data back to the client.</span></span> <span data-ttu-id="10afb-118">NAT はパケットのアドレスを書き換え、接続が NAT コンピューターで発生しているかのように見せます。</span><span class="sxs-lookup"><span data-stu-id="10afb-118">The NAT rewrites the addresses in packets to make it seem like connections are originating at the NAT machine.</span></span> <span data-ttu-id="10afb-119">このため、サーバーがクライアントへの接続を開こうとしても失敗します。</span><span class="sxs-lookup"><span data-stu-id="10afb-119">This causes the server to fail when it attempts to open a connection back to the client.</span></span> <span data-ttu-id="10afb-120">サーバーが、明らかになっているクライアントのアドレスを使用しても、クライアントのアドレスをパブリックにルーティングできないため、失敗します。</span><span class="sxs-lookup"><span data-stu-id="10afb-120">If the server uses the client's perceived address, it fails because the client address cannot be publicly routed.</span></span> <span data-ttu-id="10afb-121">サーバーが NAT アドレスを使用した場合は、該当するコンピューターにリッスンしているアプリケーションが存在しないため、接続できません。</span><span class="sxs-lookup"><span data-stu-id="10afb-121">If the server uses the NAT address, it fails to connect because no application is listening on that machine.</span></span>  
  
 <span data-ttu-id="10afb-122">一部の NAT は、転送ルールの構成をサポートし、外部コンピューターが特定の内部コンピューターに接続できるようにします。</span><span class="sxs-lookup"><span data-stu-id="10afb-122">Some NATs support the configuration of forwarding rules to allow external machines to connect to a particular internal machine.</span></span> <span data-ttu-id="10afb-123">転送ルールの構成手順は NAT によってそれぞれ異なるため、ほとんどのアプリケーションについて、NAT 構成の変更をエンド ユーザーに求めることはお勧めしません。</span><span class="sxs-lookup"><span data-stu-id="10afb-123">The instructions for configuring forwarding rules varies among different NATs, and asking end users to change their NAT configuration is not recommended for most applications.</span></span> <span data-ttu-id="10afb-124">多くのエンド ユーザーが、特定のアプリケーションに対する NAT 構成を変更できないか、変更を望まないからです。</span><span class="sxs-lookup"><span data-stu-id="10afb-124">Many end users either cannot or do not want to change their NAT configuration for a particular application.</span></span>  
  
## <a name="how-firewalls-affect-communication"></a><span data-ttu-id="10afb-125">ファイアウォールが通信に及ぼす影響</span><span class="sxs-lookup"><span data-stu-id="10afb-125">How Firewalls Affect Communication</span></span>  

 <span data-ttu-id="10afb-126">*ファイアウォール* は、通過を許可するか拒否するかを決定するために通過するトラフィックに規則を適用するソフトウェアまたはハードウェアデバイスです。</span><span class="sxs-lookup"><span data-stu-id="10afb-126">A *firewall* is a software or hardware device that applies rules to the traffic passing through to decide whether to allow or deny passage.</span></span> <span data-ttu-id="10afb-127">ファイアウォールは、トラフィックの受信ストリームまたは送信ストリーム、あるいはこの両方を調べるように構成できます。</span><span class="sxs-lookup"><span data-stu-id="10afb-127">You can configure firewalls to examine incoming and/or outgoing streams of traffic.</span></span> <span data-ttu-id="10afb-128">ファイアウォールは、ネットワークの端またはエンドポイント ホストで、ネットワークのセキュリティ境界を提供します。</span><span class="sxs-lookup"><span data-stu-id="10afb-128">The firewall provides a security boundary for the network at either the edge of the network or on the endpoint host.</span></span> <span data-ttu-id="10afb-129">ビジネス ユーザーは、悪質な攻撃を防ぐために従来からファイアウォールの内側にサーバーを保持しています。</span><span class="sxs-lookup"><span data-stu-id="10afb-129">Business users have traditionally kept their servers behind a firewall to prevent malicious attacks.</span></span> <span data-ttu-id="10afb-130">Windows XP SP2 ではパーソナルファイアウォールが導入されたため、ファイアウォールの内側にあるホームユーザーの数も大幅に増加しています。</span><span class="sxs-lookup"><span data-stu-id="10afb-130">Since the introduction of the personal firewall in Windows XP SP2, the number of home users behind a firewall has greatly increased as well.</span></span> <span data-ttu-id="10afb-131">このため、接続の一端または両端に、パケットを検査するファイアウォールが存在する場合が多くなっています。</span><span class="sxs-lookup"><span data-stu-id="10afb-131">This makes it likely that one or both ends of a connection have a firewall examining packets.</span></span>  
  
 <span data-ttu-id="10afb-132">ファイアウォールは、パケットを調べる際の複雑さと能力の点で千差万別です。</span><span class="sxs-lookup"><span data-stu-id="10afb-132">Firewalls vary greatly in terms of their complexity and capability for examining packets.</span></span> <span data-ttu-id="10afb-133">簡単なファイアウォールは、パケット内の送信元および送信先のアドレスとポートに基づいてルールを適用します。</span><span class="sxs-lookup"><span data-stu-id="10afb-133">Simple firewalls apply rules based on the source and destination addresses and ports in packets.</span></span> <span data-ttu-id="10afb-134">また、インテリジェント ファイアウォールもパケットの内容を調べて判断を下すことができます。</span><span class="sxs-lookup"><span data-stu-id="10afb-134">Intelligent firewalls can also examine the contents of packets to make decisions.</span></span> <span data-ttu-id="10afb-135">これらのファイアウォールはさまざまな構成で提供され、多くの場合、特別な用途に使用されます。</span><span class="sxs-lookup"><span data-stu-id="10afb-135">These firewalls come in many different configurations and are often used for specialized applications.</span></span>  
  
 <span data-ttu-id="10afb-136">ホーム ユーザー用ファイアウォールの一般的な構成では、以前に送信接続したことがあるコンピューター以外からの受信接続を禁止します。</span><span class="sxs-lookup"><span data-stu-id="10afb-136">A common configuration for a home user firewall is to prohibit incoming connections unless an outgoing connection was made to that machine previously.</span></span> <span data-ttu-id="10afb-137">ビジネス ユーザー用ファイアウォールの一般的な構成では、特別に指定したポート グループを除き、すべてのポートで受信接続を禁止します。</span><span class="sxs-lookup"><span data-stu-id="10afb-137">A common configuration for a business user firewall is to prohibit incoming connections on all ports except a group specifically identified.</span></span> <span data-ttu-id="10afb-138">この一例としては、HTTP サービスと HTTPS サービスを提供するポート 80 とポート 443 以外のすべてのポートで接続を禁止するファイアウォールが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="10afb-138">An example is a firewall that prohibits connections on all ports except for ports 80 and 443 to provide HTTP and HTTPS service.</span></span> <span data-ttu-id="10afb-139">管理されたファイアウォールは、ホーム ユーザーとビジネス ユーザーの両者を対象にしており、コンピューター上の信頼済みユーザーやプロセスによるファイアウォール構成の変更を許可します。</span><span class="sxs-lookup"><span data-stu-id="10afb-139">Managed firewalls exist for both home and business users that permit a trusted user or process on the machine to change the firewall configuration.</span></span> <span data-ttu-id="10afb-140">管理されたファイアウォールの対象は、ネットワークの使用状況を制御する企業ポリシーが存在しないホーム ユーザーであるのがより一般的です。</span><span class="sxs-lookup"><span data-stu-id="10afb-140">Managed firewalls are more common for home users where there is no corporate policy controlling network usage.</span></span>  
  
## <a name="using-teredo"></a><span data-ttu-id="10afb-141">Teredo の使用</span><span class="sxs-lookup"><span data-stu-id="10afb-141">Using Teredo</span></span>  

 <span data-ttu-id="10afb-142">Teredo は、NAT の内側にあるコンピューターの直接アドレス指定を可能にする IPv6 移行テクノロジです。</span><span class="sxs-lookup"><span data-stu-id="10afb-142">Teredo is an IPv6 transition technology that enables the direct addressability of machines behind a NAT.</span></span> <span data-ttu-id="10afb-143">Teredo は、パブリックにもグローバルにもルーティングが可能なサーバーを使用して考えられる接続をアドバタイズします。</span><span class="sxs-lookup"><span data-stu-id="10afb-143">Teredo relies on the use of a server that can be publicly and globally routed to advertise potential connections.</span></span> <span data-ttu-id="10afb-144">Teredo サーバーは、アプリケーション クライアントとサーバーに、接続情報を交換できる共通のミーティング ポイントを提供します。</span><span class="sxs-lookup"><span data-stu-id="10afb-144">The Teredo server gives the application client and server a common meeting point at which they can exchange connection information.</span></span> <span data-ttu-id="10afb-145">コンピューターは一時 Teredo アドレスを要求し、パケットが既存のネットワークをトンネリングされます。</span><span class="sxs-lookup"><span data-stu-id="10afb-145">The machines then request a temporary Teredo address, and packets are tunneled through the existing network.</span></span> <span data-ttu-id="10afb-146">WCF で teredo をサポートするには、オペレーティングシステムで IPv6 および Teredo のサポートを有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="10afb-146">Teredo support in WCF requires enabling IPv6 and Teredo support in the operating system.</span></span> <span data-ttu-id="10afb-147">Windows XP 以降のオペレーティングシステムでは、Teredo がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="10afb-147">Windows XP and later operating systems support Teredo.</span></span> <span data-ttu-id="10afb-148">Windows Vista 以降のオペレーティングシステムでは、IPv6 が既定でサポートされており、ユーザーのみが Teredo を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="10afb-148">Windows Vista and later operating systems support IPv6 by default and only require the user to enable Teredo.</span></span> <span data-ttu-id="10afb-149">Windows XP SP2 および Windows Server 2003 では、ユーザーは IPv6 と Teredo の両方を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="10afb-149">Windows XP SP2 and Windows Server 2003 require the user to enable both IPv6 and Teredo.</span></span> <span data-ttu-id="10afb-150">詳細については、「 [Teredo の概要](/previous-versions/windows/it-pro/windows-xp/bb457011(v=technet.10))」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="10afb-150">For more information, see the [Teredo Overview](/previous-versions/windows/it-pro/windows-xp/bb457011(v=technet.10)).</span></span>  
  
## <a name="choosing-a-transport-and-message-exchange-pattern"></a><span data-ttu-id="10afb-151">トランスポートとメッセージ交換パターンの選択</span><span class="sxs-lookup"><span data-stu-id="10afb-151">Choosing a Transport and Message Exchange Pattern</span></span>  

 <span data-ttu-id="10afb-152">トランスポートと MEP の選択は、次の 3 つの手順から成るプロセスです。</span><span class="sxs-lookup"><span data-stu-id="10afb-152">Selecting a transport and MEP is a three-step process:</span></span>  
  
1. <span data-ttu-id="10afb-153">エンドポイント コンピューターのアドレスの指定可能性を分析します。</span><span class="sxs-lookup"><span data-stu-id="10afb-153">Analyze the addressability of the endpoint machines.</span></span> <span data-ttu-id="10afb-154">一般に、エンタープライズ サーバーは直接アドレス指定できますが、エンド ユーザーの場合は、NAT により、アドレス指定できないようになっています。</span><span class="sxs-lookup"><span data-stu-id="10afb-154">Enterprise servers commonly have direct addressability, while end users commonly have their addressability blocked by NATs.</span></span> <span data-ttu-id="10afb-155">エンド ユーザー間のピアツーピア シナリオなどで、両方のエンドポイントが NAT の内側にある場合は、アドレス指定を可能にする Teredo などのテクノロジが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-155">If both endpoints are behind a NAT, such as in peer-to-peer scenarios between end users, then you might need a technology such as Teredo to provide addressability.</span></span>  
  
2. <span data-ttu-id="10afb-156">エンドポイント コンピューターのプロトコルとポートの制限を分析します。</span><span class="sxs-lookup"><span data-stu-id="10afb-156">Analyze the protocol and port restrictions of the endpoint machines.</span></span> <span data-ttu-id="10afb-157">一般にエンタープライズ サーバーは、多くのポートをブロックする強力なファイアウォールの内側にあります。</span><span class="sxs-lookup"><span data-stu-id="10afb-157">Enterprise servers are typically behind strong firewalls that block many ports.</span></span> <span data-ttu-id="10afb-158">ただし、多くの場合、ポート 80 (HTTP トラフィックを許可するため) とポート 443 (HTTPS トラフィックを許可するため) は開かれています。</span><span class="sxs-lookup"><span data-stu-id="10afb-158">However, port 80 is frequently open to permit HTTP traffic, and port 443 is open to permit HTTPS traffic.</span></span> <span data-ttu-id="10afb-159">エンド ユーザーがポートを制限している可能性はほとんどありませんが、送信接続だけを許可するファイアウォールを使用している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="10afb-159">End users are less likely to have port restrictions but might be behind a firewall that permits only outgoing connections.</span></span> <span data-ttu-id="10afb-160">一部のファイアウォールでは、エンドポイントのアプリケーションによる管理が可能で、選択的に接続を開くことができます。</span><span class="sxs-lookup"><span data-stu-id="10afb-160">Some firewalls permit management by applications on the endpoint to selectively open connections.</span></span>  
  
3. <span data-ttu-id="10afb-161">ネットワークのアドレス指定可能性とポートの制限によって許可されるトランスポートと MEP を計算します。</span><span class="sxs-lookup"><span data-stu-id="10afb-161">Compute the transports and MEPs that the addressability and port restrictions of the network permit.</span></span>  
  
 <span data-ttu-id="10afb-162">クライアント/サーバー アプリケーションの一般的なトポロジでは、送信専用のファイアウォールを持ち、Teredo を使用しない NAT の内側にあるクライアントと、強力なファイアウォールを持つ直接アドレス指定が可能なサーバーを展開します。</span><span class="sxs-lookup"><span data-stu-id="10afb-162">A common topology for client-server applications is to have clients that are behind a NAT without Teredo with an outbound-only firewall and a server that is directly addressable with a strong firewall.</span></span> <span data-ttu-id="10afb-163">このシナリオでは、双方向 MEP を使用する TCP トランスポートと、要求/応答 MEP を使用する HTTP トランスポートが適しています。</span><span class="sxs-lookup"><span data-stu-id="10afb-163">In this scenario, the TCP transport with a duplex MEP and an HTTP transport with a request-reply MEP work well.</span></span> <span data-ttu-id="10afb-164">ピアツーピア アプリケーションの一般的なトポロジでは、両方のエンドポイントを NAT とファイアウォールの内側に展開します。</span><span class="sxs-lookup"><span data-stu-id="10afb-164">A common topology for peer-to-peer applications is to have both endpoints behind NATs and firewalls.</span></span> <span data-ttu-id="10afb-165">このシナリオと、ネットワーク トポロジが不明なシナリオでは、次の推奨事項を検討してください。</span><span class="sxs-lookup"><span data-stu-id="10afb-165">In this scenario, and in scenarios where the network topology is unknown, consider the following recommendations:</span></span>  
  
- <span data-ttu-id="10afb-166">双方向トランスポートは使用しません。</span><span class="sxs-lookup"><span data-stu-id="10afb-166">Do not use dual transports.</span></span> <span data-ttu-id="10afb-167">双方向トランスポートはより多くの接続を開くため、正常に接続できる可能性が低下します。</span><span class="sxs-lookup"><span data-stu-id="10afb-167">A dual transport opens more connections, which reduces the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="10afb-168">元の接続でのバック チャネルの確立をサポートします。</span><span class="sxs-lookup"><span data-stu-id="10afb-168">Support establishing back channels over the originating connection.</span></span> <span data-ttu-id="10afb-169">双方向 TCP などでバック チャネルを使用すると、開かれる接続の数が少なくなるため、正常に接続できる可能性が向上します。</span><span class="sxs-lookup"><span data-stu-id="10afb-169">Using back channels, such as in duplex TCP, opens fewer connections, which increases the chance of connecting successfully.</span></span>  
  
- <span data-ttu-id="10afb-170">エンドポイントの登録用、またはトラフィックの中継用に到達可能なサービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="10afb-170">Employ a reachable service for either registering endpoints or relaying traffic.</span></span> <span data-ttu-id="10afb-171">Teredo サーバーなどの、グローバルに到達できる接続サービスを使用すると、ネットワーク トポロジの制限が厳しい場合やトポロジが不明な場合に正常に接続できる可能性が大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="10afb-171">Using a globally reachable connection service, such as a Teredo server, greatly increases the chance of connecting successfully when the network topology is restrictive or unknown.</span></span>  
  
 <span data-ttu-id="10afb-172">次の表では、WCF での一方向、要求/応答、双方向の MEPs、標準 TCP、Teredo を使用した TCP、標準およびデュアル HTTP トランスポートを確認します。</span><span class="sxs-lookup"><span data-stu-id="10afb-172">The following tables examine the one-way, request-reply, and duplex MEPs, and the standard TCP, TCP with Teredo, and standard and dual HTTP transports in WCF.</span></span>  
  
|<span data-ttu-id="10afb-173">アドレスの指定可能性</span><span class="sxs-lookup"><span data-stu-id="10afb-173">Addressability</span></span>|<span data-ttu-id="10afb-174">サーバー (直接指定)</span><span class="sxs-lookup"><span data-stu-id="10afb-174">Server Direct</span></span>|<span data-ttu-id="10afb-175">サーバー (NAT トラバースによる直接指定)</span><span class="sxs-lookup"><span data-stu-id="10afb-175">Server Direct with NAT traversal</span></span>|<span data-ttu-id="10afb-176">サーバー (NAT)</span><span class="sxs-lookup"><span data-stu-id="10afb-176">Server NAT</span></span>|<span data-ttu-id="10afb-177">サーバー (NAT トラバースによる NAT)</span><span class="sxs-lookup"><span data-stu-id="10afb-177">Server NAT with NAT traversal</span></span>|  
|--------------------|-------------------|--------------------------------------|----------------|-----------------------------------|  
|<span data-ttu-id="10afb-178">クライアント (直接指定)</span><span class="sxs-lookup"><span data-stu-id="10afb-178">Client direct</span></span>|<span data-ttu-id="10afb-179">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-179">Any transport and MEP</span></span>|<span data-ttu-id="10afb-180">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-180">Any transport and MEP</span></span>|<span data-ttu-id="10afb-181">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-181">Not supported.</span></span>|<span data-ttu-id="10afb-182">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-182">Not supported.</span></span>|  
|<span data-ttu-id="10afb-183">クライアント (NAT トラバースによる直接指定)</span><span class="sxs-lookup"><span data-stu-id="10afb-183">Client direct with NAT traversal</span></span>|<span data-ttu-id="10afb-184">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-184">Any transport and MEP.</span></span>|<span data-ttu-id="10afb-185">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-185">Any transport and MEP.</span></span>|<span data-ttu-id="10afb-186">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-186">Not supported.</span></span>|<span data-ttu-id="10afb-187">Teredo を使用する TCP および任意の MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-187">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="10afb-188">Windows Vista には、Teredo を使用した HTTP をサポートするためのコンピューター全体の構成オプションがあります。</span><span class="sxs-lookup"><span data-stu-id="10afb-188">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
|<span data-ttu-id="10afb-189">クライアント (NAT)</span><span class="sxs-lookup"><span data-stu-id="10afb-189">Client NAT</span></span>|<span data-ttu-id="10afb-190">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-190">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-191">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-191">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-192">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-192">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-193">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-193">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-194">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-194">Not supported.</span></span>|<span data-ttu-id="10afb-195">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-195">Not supported.</span></span>|  
|<span data-ttu-id="10afb-196">クライアント (NAT トラバースによる NAT)</span><span class="sxs-lookup"><span data-stu-id="10afb-196">Client NAT with NAT traversal</span></span>|<span data-ttu-id="10afb-197">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-197">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-198">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-198">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-199">双方向 HTTP 以外のすべてと任意の MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-199">All but dual HTTP and any MEP.</span></span> <span data-ttu-id="10afb-200">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-200">Duplex MEP requires TCP transport.</span></span> <span data-ttu-id="10afb-201">双方向 TCP トランスポートには Teredo が必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-201">Dual TCP transport requires Teredo.</span></span> <span data-ttu-id="10afb-202">Windows Vista には、Teredo を使用した HTTP をサポートするためのコンピューター全体の構成オプションがあります。</span><span class="sxs-lookup"><span data-stu-id="10afb-202">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|<span data-ttu-id="10afb-203">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-203">Not supported.</span></span>|<span data-ttu-id="10afb-204">Teredo を使用する TCP および任意の MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-204">TCP with Teredo and any MEP.</span></span> <span data-ttu-id="10afb-205">Windows Vista には、Teredo を使用した HTTP をサポートするためのコンピューター全体の構成オプションがあります。</span><span class="sxs-lookup"><span data-stu-id="10afb-205">Windows Vista has a machine-wide configuration option to support HTTP with Teredo.</span></span>|  
  
|<span data-ttu-id="10afb-206">ファイアウォールの制限</span><span class="sxs-lookup"><span data-stu-id="10afb-206">Firewall restrictions</span></span>|<span data-ttu-id="10afb-207">ファイアウォールを使用しないサーバー</span><span class="sxs-lookup"><span data-stu-id="10afb-207">Server open</span></span>|<span data-ttu-id="10afb-208">管理されたファイアウォールを使用するサーバー</span><span class="sxs-lookup"><span data-stu-id="10afb-208">Server with managed firewall</span></span>|<span data-ttu-id="10afb-209">HTTP 専用のファイアウォールを使用するサーバー</span><span class="sxs-lookup"><span data-stu-id="10afb-209">Server with HTTP-only firewall</span></span>|<span data-ttu-id="10afb-210">送信専用のファイアウォールを使用するサーバー</span><span class="sxs-lookup"><span data-stu-id="10afb-210">Server with outbound-only firewall</span></span>|  
|---------------------------|-----------------|----------------------------------|-------------------------------------|-----------------------------------------|  
|<span data-ttu-id="10afb-211">ファイアウォールを使用しないクライアント</span><span class="sxs-lookup"><span data-stu-id="10afb-211">Client Open</span></span>|<span data-ttu-id="10afb-212">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-212">Any transport and MEP.</span></span>|<span data-ttu-id="10afb-213">トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-213">Any transport and MEP.</span></span>|<span data-ttu-id="10afb-214">任意の HTTP トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-214">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="10afb-215">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-215">Not supported.</span></span>|  
|<span data-ttu-id="10afb-216">管理されたファイアウォールを使用するクライアント</span><span class="sxs-lookup"><span data-stu-id="10afb-216">Client with managed firewall</span></span>|<span data-ttu-id="10afb-217">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-217">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-218">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-218">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-219">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-219">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-220">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-220">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-221">任意の HTTP トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-221">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="10afb-222">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-222">Not supported.</span></span>|  
|<span data-ttu-id="10afb-223">HTTP 専用のファイアウォールを使用するクライアント</span><span class="sxs-lookup"><span data-stu-id="10afb-223">Client with HTTP-only firewall</span></span>|<span data-ttu-id="10afb-224">任意の HTTP トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-224">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="10afb-225">任意の HTTP トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-225">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="10afb-226">任意の HTTP トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-226">Any HTTP transport and MEP.</span></span>|<span data-ttu-id="10afb-227">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-227">Not supported.</span></span>|  
|<span data-ttu-id="10afb-228">送信専用のファイアウォールを使用するクライアント</span><span class="sxs-lookup"><span data-stu-id="10afb-228">Client with outbound-only firewall</span></span>|<span data-ttu-id="10afb-229">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-229">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-230">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-230">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-231">任意の一方向トランスポートおよび MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-231">Any non-dual transport and MEP.</span></span> <span data-ttu-id="10afb-232">双方向 MEP には TCP トランスポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="10afb-232">Duplex MEP requires TCP transport.</span></span>|<span data-ttu-id="10afb-233">任意の HTTP トランスポートおよび任意の非双方向 MEP。</span><span class="sxs-lookup"><span data-stu-id="10afb-233">Any HTTP transport and any non-duplex MEP.</span></span>|<span data-ttu-id="10afb-234">サポートされていません。</span><span class="sxs-lookup"><span data-stu-id="10afb-234">Not supported.</span></span>|
